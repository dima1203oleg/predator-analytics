apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: external-apis-secrets
  namespace: predator
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: vault-backend
    kind: ClusterSecretStore
  target:
    name: external-apis-secrets
    creationPolicy: Owner
  data:
    # --- FINANCE ---
    - secretKey: ALPHA_VANTAGE_API_KEY
      remoteRef:
        key: external/alpha_vantage
        property: api_key
    - secretKey: FINNHUB_API_KEY
      remoteRef:
        key: external/finnhub
        property: api_key
    - secretKey: MARKETSTACK_API_KEY
      remoteRef:
        key: external/marketstack
        property: api_key
    - secretKey: FMP_API_KEY
      remoteRef:
        key: external/fmp
        property: api_key
        
    # --- CYBERSEC ---
    - secretKey: ABUSEIPDB_API_KEY
      remoteRef:
        key: external/abuseipdb
        property: api_key
    - secretKey: VIRUSTOTAL_API_KEY
      remoteRef:
        key: external/virustotal
        property: api_key
    - secretKey: HIBP_API_KEY
      remoteRef:
        key: external/hibp
        property: api_key
    - secretKey: PULSEDIVE_API_KEY
      remoteRef:
        key: external/pulsedive
        property: api_key
    - secretKey: GSB_API_KEY
      remoteRef:
        key: external/google_safe_browsing
        property: api_key
        
    # --- UA GOVERNMENT & REGISTRIES ---
    - secretKey: OPENDATABOT_API_KEY
      remoteRef:
        key: external/opendatabot
        property: api_key
    - secretKey: UA_TAX_CABINET_KEY
      remoteRef:
        key: external/ua_tax/cabinet
        property: api_key
    - secretKey: UA_PROZORRO_API_KEY
      remoteRef:
        key: external/ua_prozorro
        property: api_key
    - secretKey: UA_PROZORRO_SALE_API_KEY
      remoteRef:
        key: external/ua_prozorro_sale
        property: api_key
    
    # --- CERTIFICATES (EDS) ---
    - secretKey: UA_CUSTOMS_EDS_P12
      remoteRef:
        key: external/ua_customs/eds
        property: p12_base64
    - secretKey: UA_DZC_EDS_P12
      remoteRef:
        key: external/ua_dzc/eds
        property: p12_base64
    - secretKey: UA_EDR_EDS_P12
      remoteRef:
        key: external/ua_edr/eds
        property: p12_base64