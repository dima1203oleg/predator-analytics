# üîÑ –†–æ–±–æ—Ç–∞ –∑ —Å–µ—Ä–≤–µ—Ä–æ–º Predator Analytics

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î, —è–∫ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º —Ç–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–∏—Å—è –º—ñ–∂ Mac —ñ —Å–µ—Ä–≤–µ—Ä–æ–º.

## üìã –ó–º—ñ—Å—Ç

1. [–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç](#—à–≤–∏–¥–∫–∏–π-—Å—Ç–∞—Ä—Ç)
2. [–°–∫—Ä–∏–ø—Ç–∏](#—Å–∫—Ä–∏–ø—Ç–∏)
3. [Workflow](#workflow)
4. [–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è](#—Ä–µ–∑–µ—Ä–≤–Ω–µ-–∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è)
5. [Troubleshooting](#troubleshooting)

---

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ü—Ä–æ—Å—Ç–∏–π —Å–ø–æ—Å—ñ–± (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å–∫—Ä–∏–ø—Ç)
./scripts/server-connect.sh

# –ê–±–æ –≤—Ä—É—á–Ω—É
ssh -i ~/.ssh/id_ed25519_ngrok dima@5.tcp.eu.ngrok.io -p 14564
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Å–µ—Ä–≤–µ—Ä–∞

```bash
./scripts/server-status.sh
```

### –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä (–∑ Mac)
./scripts/sync-to-server.sh

# –ó —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞ Mac - —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è)
./scripts/sync-from-server.sh
```

---

## üõ†Ô∏è –°–∫—Ä–∏–ø—Ç–∏

–£ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `scripts/` —î –∫–æ—Ä–∏—Å–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Å–µ—Ä–≤–µ—Ä–æ–º:

### 1. `server-connect.sh` - –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
./scripts/server-connect.sh

# –í–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
./scripts/server-connect.sh "ls -la"
./scripts/server-connect.sh "docker ps"
./scripts/server-connect.sh "cd predator-analytics && git status"
```

### 2. `server-status.sh` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É

**–ü–æ–∫–∞–∑—É—î:**
- ‚úÖ –°—Ç–∞–Ω –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- üíª –°–∏—Å—Ç–µ–º–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
- üíæ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–∏—Å–∫–∞
- üß† –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
- üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
- üêç Python –ø—Ä–æ—Ü–µ—Å–∏
- üì¶ Node.js –ø—Ä–æ—Ü–µ—Å–∏
- üîå –í—ñ–¥–∫—Ä–∏—Ç—ñ –ø–æ—Ä—Ç–∏

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
./scripts/server-status.sh
```

### 3. `sync-to-server.sh` - –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–ö–æ–ø—ñ—é—î –∫–æ–¥ –∑ Mac –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –≤–∏–∫–ª—é—á–∞—é—á–∏:**
- `node_modules/`
- `.venv/`, `venv/`
- `__pycache__/`, `*.pyc`
- `.git/`
- –õ–æ–≥–∏ —Ç–∞ —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è
./scripts/sync-to-server.sh

# –ü–µ—Ä–µ–≥–ª—è–¥ –∑–º—ñ–Ω –±–µ–∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (dry-run)
./scripts/sync-to-server.sh --dry-run
```

### 4. `sync-from-server.sh` - –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

**–ö–æ–ø—ñ—é—î –∫–æ–¥ –∑ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Mac –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `server-backup/`**

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
./scripts/sync-from-server.sh

# –ü–µ—Ä–µ–≥–ª—è–¥ –∑–º—ñ–Ω –±–µ–∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (dry-run)
./scripts/sync-from-server.sh --dry-run
```

---

## üìù Workflow

### –¢–∏–ø–æ–≤–∏–π —Ä–æ–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å

#### 1Ô∏è‚É£ **–†–∞–Ω–æ–∫ - –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞**

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
./scripts/server-status.sh

# –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è
./scripts/server-connect.sh

# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
cd ~/predator-analytics
source .venv/bin/activate
git pull origin main
```

#### 2Ô∏è‚É£ **–†–æ–±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ backend
cd ~/predator-analytics/backend
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ frontend (—É –Ω–æ–≤–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ)
cd ~/predator-analytics
npm run dev

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Celery (—É –Ω–æ–≤–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ)
cd ~/predator-analytics/backend
celery -A app.core.celery_app worker -l info
```

#### 3Ô∏è‚É£ **–Ø–∫—â–æ –ø—Ä–æ–ø–∞–ª–æ —Å–≤—ñ—Ç–ª–æ - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞ Mac**

```bash
# 1. –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑ —Å–µ—Ä–≤–µ—Ä–∞
./scripts/sync-from-server.sh

# 2. –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Mac
cd /Users/dima-mac/Documents/Predator_21/ua-sources
source .venv/bin/activate
uvicorn app.main:app --reload

# 3. –£ –Ω–æ–≤–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ - frontend
cd /Users/dima-mac/Documents/Predator_21
npm run dev
```

#### 4Ô∏è‚É£ **–°–≤—ñ—Ç–ª–æ –∑'—è–≤–∏–ª–æ—Å—è - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä**

```bash
# 1. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
./scripts/sync-to-server.sh

# 2. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
./scripts/server-connect.sh

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
cd ~/predator-analytics
git add .
git commit -m "–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ Mac"
docker-compose restart
```

---

## üíæ –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–°—Ç–≤–æ—Ä—ñ—Ç—å cron job –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:

```bash
# –í—ñ–¥–∫—Ä–∏—Ç–∏ crontab
crontab -e

# –î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫ (–±–µ–∫–∞–ø –∫–æ–∂–Ω—ñ 2 –≥–æ–¥–∏–Ω–∏)
0 */2 * * * /Users/dima-mac/Documents/Predator_21/scripts/sync-from-server.sh >> /Users/dima-mac/Documents/Predator_21/logs/sync.log 2>&1
```

### –†—É—á–Ω–µ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–≤–Ω–∏–π –±–µ–∫–∞–ø –∑ –¥–∞—Ç–æ—é
./scripts/sync-from-server.sh
cd /Users/dima-mac/Documents/Predator_21
tar -czf "backup-$(date +%Y%m%d-%H%M%S).tar.gz" server-backup/
```

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
ping 5.tcp.eu.ngrok.io

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ä—Ç
nc -zv 5.tcp.eu.ngrok.io 14564

# –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –∑ verbose
ssh -vvv -i ~/.ssh/id_ed25519_ngrok dima@5.tcp.eu.ngrok.io -p 14564
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–µ –ø—Ä–∞—Ü—é—î

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ SSH-–∫–ª—é—á
ls -la ~/.ssh/id_ed25519_ngrok*

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
chmod 600 ~/.ssh/id_ed25519_ngrok
chmod 644 ~/.ssh/id_ed25519_ngrok.pub

# –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ dry-run
./scripts/sync-to-server.sh --dry-run
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –º—ñ—Å—Ü—è –Ω–∞ –¥–∏—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
./scripts/server-connect.sh

# –û—á–∏—Å—Ç–∏—Ç–∏ Docker
docker system prune -af --volumes

# –û—á–∏—Å—Ç–∏—Ç–∏ APT –∫–µ—à
sudo apt clean
sudo apt autoclean

# –û—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–≥–∏
sudo journalctl --vacuum-time=7d

# –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ Python –∫–µ—à—ñ
find . -type d -name "__pycache__" -exec rm -rf {} +
find . -type f -name "*.pyc" -delete
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
./scripts/server-connect.sh "docker logs <container_id>"

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Docker Compose
./scripts/server-connect.sh "cd predator-analytics && docker-compose ps"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
./scripts/server-connect.sh "cd predator-analytics && docker-compose restart"
```

---

## üìå –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

### –ù–∞ Mac

```bash
# –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
./scripts/server-status.sh

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏
./scripts/server-connect.sh "htop"

# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è + –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
./scripts/sync-to-server.sh && ./scripts/server-connect.sh
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
systemctl status predator-*

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
journalctl -u predator-backend -f

# –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å—ñ–≤
htop
docker stats
```

---

## üéØ Best Practices

1. **–ó–∞–≤–∂–¥–∏ —Ä–æ–±—ñ—Ç—å –±–µ–∫–∞–ø –ø–µ—Ä–µ–¥ –≤–µ–ª–∏–∫–∏–º–∏ –∑–º—ñ–Ω–∞–º–∏:**
   ```bash
   ./scripts/sync-from-server.sh
   ```

2. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Git –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –≤–µ—Ä—Å—ñ–π:**
   ```bash
   git add .
   git commit -m "–û–ø–∏—Å –∑–º—ñ–Ω"
   git push origin main
   ```

3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   ./scripts/server-status.sh
   ```

4. **–¢—Ä–∏–º–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É –∫–æ–ø—ñ—é –∞–∫—Ç—É–∞–ª—å–Ω–æ—é:**
   ```bash
   ./scripts/sync-from-server.sh  # –©–æ–¥–Ω—è
   ```

5. **–û—á–∏—â—É–π—Ç–µ —Å—Ç–∞—Ä—ñ —Ñ–∞–π–ª–∏:**
   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
   docker system prune -f
   find . -name "*.log" -mtime +7 -delete
   ```

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏:

1. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å: `./scripts/server-status.sh`
2. ‚úÖ –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
3. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
4. ‚úÖ –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
5. ‚úÖ –£ –∫—Ä–∏—Ç–∏—á–Ω—ñ–π —Å–∏—Ç—É–∞—Ü—ñ—ó - –ø–µ—Ä–µ–∫–ª—é—á—ñ—Ç—å—Å—è –Ω–∞ Mac

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 2025-12-05  
**–í–µ—Ä—Å—ñ—è:** 1.0
